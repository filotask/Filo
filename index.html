<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FiloTrack - Project Management System</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .sidebar-transition {
            transition: all 0.3s ease-in-out;
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .slide-in {
            animation: slideIn 0.3s ease-out;
        }
        
        @keyframes slideIn {
            from { transform: translateX(-100%); }
            to { transform: translateX(0); }
        }
        
        .bounce-in {
            animation: bounceIn 0.6s ease-out;
        }
        
        @keyframes bounceIn {
            0% { transform: scale(0.3); opacity: 0; }
            50% { transform: scale(1.05); }
            70% { transform: scale(0.9); }
            100% { transform: scale(1); opacity: 1; }
        }
        
        .pulse-glow {
            animation: pulseGlow 2s infinite;
        }
        
        @keyframes pulseGlow {
            0%, 100% { box-shadow: 0 0 5px rgba(59, 130, 246, 0.5); }
            50% { box-shadow: 0 0 20px rgba(59, 130, 246, 0.8); }
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .card-hover {
            transition: all 0.3s ease;
        }
        
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        
        .notification-badge {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        
        .dark-mode {
            background-color: #1a202c;
            color: #e2e8f0;
        }
        
        .dark-mode .bg-white {
            background-color: #2d3748 !important;
            color: #e2e8f0 !important;
        }
        
        .dark-mode .text-gray-800 {
            color: #e2e8f0 !important;
        }
        
        .dark-mode .text-gray-600 {
            color: #a0aec0 !important;
        }
        
        .dark-mode .border-gray-200 {
            border-color: #4a5568 !important;
        }
        
        .typing-indicator {
            display: inline-block;
        }
        
        .typing-indicator span {
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: #9ca3af;
            animation: typing 1.4s infinite ease-in-out;
        }
        
        .typing-indicator span:nth-child(1) { animation-delay: -0.32s; }
        .typing-indicator span:nth-child(2) { animation-delay: -0.16s; }
        
        @keyframes typing {
            0%, 80%, 100% { transform: scale(0); opacity: 0.5; }
            40% { transform: scale(1); opacity: 1; }
        }
        
        .message-bubble {
            max-width: 70%;
            word-wrap: break-word;
        }
        
        .scrollbar-hide {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        
        .scrollbar-hide::-webkit-scrollbar {
            display: none;
        }
        
        .sync-indicator {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
            transition: all 0.3s ease;
        }
        
        .sync-online {
            background-color: #10b981;
            color: white;
        }
        
        .sync-offline {
            background-color: #ef4444;
            color: white;
        }
        
        .sync-syncing {
            background-color: #f59e0b;
            color: white;
            animation: pulse 1s infinite;
        }
        
        .sync-error {
            background-color: #dc2626;
            color: white;
        }
        
        .github-setup {
            background: linear-gradient(135deg, #24292e 0%, #586069 100%);
            color: white;
        }
        
        .github-setup input {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
        }
        
        .github-setup input::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }
        
        .github-setup input:focus {
            background: rgba(255, 255, 255, 0.15);
            border-color: #0366d6;
            outline: none;
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen">
    <!-- Sync Status Indicator -->
    <div id="syncIndicator" class="sync-indicator sync-offline">
        <span id="syncStatus">Offline</span>
    </div>



    <!-- Login Screen -->
    <div id="loginScreen" class="hidden min-h-screen flex items-center justify-center gradient-bg">
        <div class="bg-white p-8 rounded-lg shadow-2xl w-96 bounce-in">
            <div class="text-center mb-8">
                <h1 class="text-3xl font-bold text-gray-800 mb-2">FiloTrack</h1>
                <p class="text-gray-600">Project Management System</p>
            </div>
            
            <form id="loginForm" class="space-y-6">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                    <input type="email" id="loginEmail" required 
                           class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                           placeholder="Enter your email">
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Password</label>
                    <input type="password" id="loginPassword" required 
                           class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                           placeholder="Enter your password">
                </div>
                
                <button type="submit" 
                        class="w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition duration-200 pulse-glow">
                    Sign In
                </button>
            </form>
            
            <div class="mt-6 text-center text-sm text-gray-600">
                <p>Demo credentials:</p>
                <p>Email: admin@company.com</p>
                <p>Password: admin123</p>
            </div>
        </div>
    </div>

    <!-- Main Application -->
    <div id="mainApp" class="hidden">
        <!-- Top Navigation -->
        <nav class="bg-white shadow-sm border-b border-gray-200 px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button id="sidebarToggle" class="text-gray-500 hover:text-gray-700">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                        </svg>
                    </button>
                    <h1 class="text-2xl font-bold text-gray-800">FiloTrack</h1>
                </div>
                
                <div class="flex items-center space-x-4">
                    <!-- GitHub Sync Status -->
                    <div class="text-gray-500 relative" title="GitHub Sync Status">
                        <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                        </svg>
                        <span id="githubSyncStatus" class="absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full"></span>
                    </div>
                    
                    <!-- Dark Mode Toggle -->
                    <button id="darkModeToggle" class="text-gray-500 hover:text-gray-700">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path>
                        </svg>
                    </button>
                    
                    <!-- Notifications -->
                    <div class="relative">
                        <button id="notificationBtn" class="text-gray-500 hover:text-gray-700 relative">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-5 5v-5zM10.07 2.82l3.93 3.93-3.93 3.93-3.93-3.93 3.93-3.93z"></path>
                            </svg>
                            <span id="notificationBadge" class="absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center notification-badge hidden">0</span>
                        </button>
                        
                        <!-- Notification Dropdown -->
                        <div id="notificationDropdown" class="hidden absolute right-0 mt-2 w-80 bg-white rounded-md shadow-lg z-50 border border-gray-200">
                            <div class="p-4 border-b border-gray-200">
                                <h3 class="text-lg font-semibold text-gray-800">Notifications</h3>
                            </div>
                            <div id="notificationList" class="max-h-64 overflow-y-auto">
                                <!-- Notifications will be populated here -->
                            </div>
                        </div>
                    </div>
                    
                    <!-- User Profile -->
                    <div class="relative">
                        <button id="userMenuBtn" class="flex items-center space-x-2 text-gray-700 hover:text-gray-900">
                            <img id="userAvatar" src="" alt="User" class="w-8 h-8 rounded-full">
                            <span id="userName" class="font-medium"></span>
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                            </svg>
                        </button>
                        
                        <!-- User Dropdown -->
                        <div id="userDropdown" class="hidden absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg z-50 border border-gray-200">
                            <a href="#" id="profileBtn" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Profile</a>
                            <a href="#" id="settingsBtn" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Settings</a>
                            <hr class="border-gray-200">
                            <a href="#" id="logoutBtn" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Logout</a>
                        </div>
                    </div>
                </div>
            </div>
        </nav>

        <div class="flex">
            <!-- Sidebar -->
            <aside id="sidebar" class="bg-gray-800 text-white w-64 min-h-screen sidebar-transition">
                <div class="p-6">
                    <div class="space-y-4">
                        <button id="dashboardBtn" class="w-full flex items-center space-x-3 text-left p-3 rounded-lg hover:bg-gray-700 transition duration-200">
                            <svg class="w-5 h-5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"></path>
                            </svg>
                            <span>Dashboard</span>
                        </button>
                        
                        <button id="projectsBtn" class="w-full flex items-center space-x-3 text-left p-3 rounded-lg hover:bg-gray-700 transition duration-200">
                            <svg class="w-5 h-5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>
                            </svg>
                            <span>Projects</span>
                        </button>
                        
                        <button id="tasksBtn" class="w-full flex items-center space-x-3 text-left p-3 rounded-lg hover:bg-gray-700 transition duration-200">
                            <svg class="w-5 h-5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path>
                            </svg>
                            <span>Tasks</span>
                        </button>
                        
                        <button id="teamBtn" class="w-full flex items-center space-x-3 text-left p-3 rounded-lg hover:bg-gray-700 transition duration-200" style="display: none;">
                            <svg class="w-5 h-5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
                            </svg>
                            <span>Team</span>
                        </button>
                        
                        <button id="chatBtn" class="w-full flex items-center space-x-3 text-left p-3 rounded-lg hover:bg-gray-700 transition duration-200">
                            <svg class="w-5 h-5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>
                            </svg>
                            <span>Chat</span>
                        </button>
                        
                        <button id="reportsBtn" class="w-full flex items-center space-x-3 text-left p-3 rounded-lg hover:bg-gray-700 transition duration-200">
                            <svg class="w-5 h-5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                            </svg>
                            <span>Reports</span>
                        </button>
                    </div>
                </div>
            </aside>

            <!-- Main Content -->
            <main class="flex-1 p-6">
                <!-- Dashboard View -->
                <div id="dashboardView" class="fade-in">
                    <div class="mb-8">
                        <h2 class="text-3xl font-bold text-gray-800 mb-2">Welcome back!</h2>
                        <p class="text-gray-600" id="welcomeMessage">Here's what's happening with your projects today.</p>
                    </div>

                    <!-- Stats Cards -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                        <div class="bg-white p-6 rounded-lg shadow-md card-hover cursor-pointer" onclick="showView('projects')">
                            <div class="flex items-center">
                                <div class="p-3 rounded-full bg-blue-100 text-blue-600">
                                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>
                                    </svg>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm font-medium text-gray-600">Total Projects</p>
                                    <p class="text-2xl font-bold text-gray-900" id="totalProjects">0</p>
                                </div>
                            </div>
                            <div class="mt-2">
                                <p class="text-xs text-gray-500">Click to view all projects</p>
                            </div>
                        </div>

                        <div class="bg-white p-6 rounded-lg shadow-md card-hover cursor-pointer" onclick="showTasksWithFilter('active')">
                            <div class="flex items-center">
                                <div class="p-3 rounded-full bg-green-100 text-green-600">
                                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path>
                                    </svg>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm font-medium text-gray-600">Active Tasks</p>
                                    <p class="text-2xl font-bold text-gray-900" id="activeTasks">0</p>
                                </div>
                            </div>
                            <div class="mt-2">
                                <p class="text-xs text-gray-500">Click to view active tasks</p>
                            </div>
                        </div>

                        <div class="bg-white p-6 rounded-lg shadow-md card-hover cursor-pointer" onclick="showTasksWithFilter('pending')">
                            <div class="flex items-center">
                                <div class="p-3 rounded-full bg-yellow-100 text-yellow-600">
                                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                    </svg>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm font-medium text-gray-600">Pending Tasks</p>
                                    <p class="text-2xl font-bold text-gray-900" id="pendingTasks">0</p>
                                </div>
                            </div>
                            <div class="mt-2">
                                <p class="text-xs text-gray-500">Click to view pending tasks</p>
                            </div>
                        </div>

                        <div class="bg-white p-6 rounded-lg shadow-md card-hover cursor-pointer" onclick="showView('team')">
                            <div class="flex items-center">
                                <div class="p-3 rounded-full bg-purple-100 text-purple-600">
                                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
                                    </svg>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm font-medium text-gray-600">Team Members</p>
                                    <p class="text-2xl font-bold text-gray-900" id="teamMembers">0</p>
                                </div>
                            </div>
                            <div class="mt-2">
                                <p class="text-xs text-gray-500">Click to view team members</p>
                            </div>
                        </div>
                    </div>

                    <!-- Recent Activity & Quick Actions -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <!-- Recent Projects -->
                        <div class="bg-white p-6 rounded-lg shadow-md">
                            <h3 class="text-lg font-semibold text-gray-800 mb-4">Recent Projects</h3>
                            <div id="recentProjects" class="space-y-3">
                                <p class="text-gray-500 text-center py-8">No projects yet. Create your first project!</p>
                            </div>
                        </div>

                        <!-- Motivational Quote -->
                        <div class="bg-gradient-to-r from-blue-500 to-purple-600 p-6 rounded-lg shadow-md text-white">
                            <h3 class="text-lg font-semibold mb-4">Daily Inspiration</h3>
                            <blockquote class="text-lg italic mb-4" id="dailyQuote">
                                "The way to get started is to quit talking and begin doing."
                            </blockquote>
                            <p class="text-sm opacity-90" id="quoteAuthor">- Walt Disney</p>
                            <button id="newQuoteBtn" class="mt-4 bg-white bg-opacity-20 hover:bg-opacity-30 px-4 py-2 rounded-md transition duration-200">
                                New Quote
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Projects View -->
                <div id="projectsView" class="hidden">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-3xl font-bold text-gray-800">Projects</h2>
                        <button id="addProjectBtn" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition duration-200">
                            <svg class="w-5 h-5 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                            </svg>
                            Add Project
                        </button>
                    </div>

                    <div id="projectsList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        <!-- Projects will be populated here -->
                    </div>
                </div>

                <!-- Tasks View -->
                <div id="tasksView" class="hidden">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-3xl font-bold text-gray-800">Tasks</h2>
                        <button id="addTaskBtn" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition duration-200">
                            <svg class="w-5 h-5 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                            </svg>
                            Add Task
                        </button>
                    </div>

                    <!-- Task Filters -->
                    <div class="mb-6 flex space-x-4">
                        <button class="task-filter active bg-blue-600 text-white px-4 py-2 rounded-lg" data-status="all">All Tasks</button>
                        <button class="task-filter bg-gray-200 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-300" data-status="pending">Pending</button>
                        <button class="task-filter bg-gray-200 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-300" data-status="active">Active</button>
                        <button class="task-filter bg-gray-200 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-300" data-status="to-do">To Do</button>
                        <button class="task-filter bg-gray-200 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-300" data-status="under-review">Under Review</button>
                        <button class="task-filter bg-gray-200 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-300" data-status="completed">Completed</button>
                    </div>

                    <div id="tasksList" class="space-y-4">
                        <!-- Tasks will be populated here -->
                    </div>
                </div>

                <!-- Team View -->
                <div id="teamView" class="hidden">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-3xl font-bold text-gray-800">Team Members</h2>
                        <button id="addUserBtn" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition duration-200">
                            <svg class="w-5 h-5 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                            </svg>
                            Add Member
                        </button>
                    </div>

                    <div id="teamList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        <!-- Team members will be populated here -->
                    </div>
                </div>

                <!-- Chat View -->
                <div id="chatView" class="hidden">
                    <div class="flex h-96">
                        <!-- Chat Users List -->
                        <div class="w-1/3 bg-white rounded-l-lg shadow-md border-r border-gray-200">
                            <div class="p-4 border-b border-gray-200">
                                <h3 class="text-lg font-semibold text-gray-800">Team Chat</h3>
                            </div>
                            <div id="chatUsersList" class="overflow-y-auto h-80">
                                <!-- Chat users will be populated here -->
                            </div>
                        </div>

                        <!-- Chat Messages -->
                        <div class="w-2/3 bg-white rounded-r-lg shadow-md flex flex-col">
                            <div class="p-4 border-b border-gray-200">
                                <h4 id="chatHeader" class="font-semibold text-gray-800">Select a team member to start chatting</h4>
                            </div>
                            
                            <div id="chatMessages" class="flex-1 p-4 overflow-y-auto scrollbar-hide">
                                <div class="text-center text-gray-500 mt-20">
                                    <svg class="w-16 h-16 mx-auto mb-4 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>
                                    </svg>
                                    <p>Select a team member to start chatting</p>
                                </div>
                            </div>
                            
                            <div id="chatInputArea" class="p-4 border-t border-gray-200 hidden">
                                <div class="flex space-x-2">
                                    <input type="text" id="chatInput" placeholder="Type your message..." 
                                           class="flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                                    <button id="sendMessageBtn" class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition duration-200">
                                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path>
                                        </svg>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Reports View -->
                <div id="reportsView" class="hidden">
                    <h2 class="text-3xl font-bold text-gray-800 mb-6">Reports & Analytics</h2>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <!-- Project Status Chart -->
                        <div class="bg-white p-6 rounded-lg shadow-md">
                            <h3 class="text-lg font-semibold text-gray-800 mb-4">Project Status Overview</h3>
                            <div class="space-y-4">
                                <div class="flex items-center justify-between">
                                    <span class="text-sm text-gray-600">Active Projects</span>
                                    <span class="font-semibold" id="activeProjectsCount">0</span>
                                </div>
                                <div class="flex items-center justify-between">
                                    <span class="text-sm text-gray-600">Completed Projects</span>
                                    <span class="font-semibold" id="completedProjectsCount">0</span>
                                </div>
                                <div class="flex items-center justify-between">
                                    <span class="text-sm text-gray-600">On Hold Projects</span>
                                    <span class="font-semibold" id="onHoldProjectsCount">0</span>
                                </div>
                            </div>
                        </div>

                        <!-- Task Completion Rate -->
                        <div class="bg-white p-6 rounded-lg shadow-md">
                            <h3 class="text-lg font-semibold text-gray-800 mb-4">Task Completion Rate</h3>
                            <div class="space-y-4">
                                <div class="flex items-center justify-between">
                                    <span class="text-sm text-gray-600">Completed Tasks</span>
                                    <span class="font-semibold" id="completedTasksCount">0</span>
                                </div>
                                <div class="flex items-center justify-between">
                                    <span class="text-sm text-gray-600">Total Tasks</span>
                                    <span class="font-semibold" id="totalTasksCount">0</span>
                                </div>
                                <div class="flex items-center justify-between">
                                    <span class="text-sm text-gray-600">Completion Rate</span>
                                    <span class="font-semibold" id="completionRate">0%</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Add Project Modal -->
    <div id="addProjectModal" class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50">
        <div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white">
            <div class="mt-3">
                <h3 class="text-lg font-medium text-gray-900 mb-4">Add New Project</h3>
                <form id="addProjectForm" class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Project Name</label>
                        <input type="text" id="projectName" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Description</label>
                        <textarea id="projectDescription" rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Due Date</label>
                        <input type="date" id="projectDueDate" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Priority</label>
                        <select id="projectPriority" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <option value="low">Low</option>
                            <option value="medium">Medium</option>
                            <option value="high">High</option>
                        </select>
                    </div>
                    <div class="flex justify-end space-x-3 mt-6">
                        <button type="button" id="cancelProjectBtn" class="px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400">Cancel</button>
                        <button type="submit" class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700">Add Project</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Add Task Modal -->
    <div id="addTaskModal" class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50">
        <div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white">
            <div class="mt-3">
                <h3 class="text-lg font-medium text-gray-900 mb-4">Add New Task</h3>
                <form id="addTaskForm" class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Task Title</label>
                        <input type="text" id="taskTitle" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Description</label>
                        <textarea id="taskDescription" rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Project</label>
                        <select id="taskProject" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <option value="">Select Project</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Assigned To</label>
                        <select id="taskAssignee" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <option value="">Select Assignee</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Due Date</label>
                        <input type="date" id="taskDueDate" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Priority</label>
                        <select id="taskPriority" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <option value="low">Low</option>
                            <option value="medium">Medium</option>
                            <option value="high">High</option>
                        </select>
                    </div>
                    <div class="flex justify-end space-x-3 mt-6">
                        <button type="button" id="cancelTaskBtn" class="px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400">Cancel</button>
                        <button type="submit" class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700">Add Task</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Add User Modal -->
    <div id="addUserModal" class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50">
        <div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white">
            <div class="mt-3">
                <h3 class="text-lg font-medium text-gray-900 mb-4">Add New Team Member</h3>
                <form id="addUserForm" class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Full Name</label>
                        <input type="text" id="userFullName" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Email</label>
                        <input type="email" id="userEmail" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Password</label>
                        <input type="password" id="userPassword" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Role</label>
                        <select id="userRole" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <option value="trainee">Trainee</option>
                            <option value="staff">Staff</option>
                            <option value="manager">Manager</option>
                            <option value="admin">Admin</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Phone</label>
                        <input type="tel" id="userPhone" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                    <div class="flex justify-end space-x-3 mt-6">
                        <button type="button" id="cancelUserBtn" class="px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400">Cancel</button>
                        <button type="submit" class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700">Add Member</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script>
        // GitHub Sync Configuration - Auto-configured
        let githubConfig = {
            username: 'filotask',
            repo: 'Home',
            token: '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'
        };
        let syncInterval = null;
        let lastSyncTime = localStorage.getItem('FiloTrack_lastSyncTime') || null;
        let syncStatus = 'offline';
        let isOnline = navigator.onLine;

        // Data Storage with Persistence
        let currentUser = null;
        let sidebarCollapsed = false;
        let notifications = JSON.parse(localStorage.getItem('FiloTrack_notifications')) || [];
        let isDarkMode = JSON.parse(localStorage.getItem('FiloTrack_darkMode')) || false;
        let messages = JSON.parse(localStorage.getItem('FiloTrack_messages')) || [];
        let selectedChatUser = null;

        // Quotes Collection
        const quotes = [
            { text: "The way to get started is to quit talking and begin doing.", author: "Walt Disney" },
            { text: "Innovation distinguishes between a leader and a follower.", author: "Steve Jobs" },
            { text: "Your work is going to fill a large part of your life, and the only way to be truly satisfied is to do what you believe is great work.", author: "Steve Jobs" },
            { text: "The only way to do great work is to love what you do.", author: "Steve Jobs" },
            { text: "Success is not final, failure is not fatal: it is the courage to continue that counts.", author: "Winston Churchill" },
            { text: "The future belongs to those who believe in the beauty of their dreams.", author: "Eleanor Roosevelt" },
            { text: "It is during our darkest moments that we must focus to see the light.", author: "Aristotle" },
            { text: "Success is not how high you have climbed, but how you make a positive difference to the world.", author: "Roy T. Bennett" },
            { text: "Don't be afraid to give up the good to go for the great.", author: "John D. Rockefeller" },
            { text: "The only impossible journey is the one you never begin.", author: "Tony Robbins" }
        ];
        
        // Default data
        const defaultUsers = [
            { 
                id: 1, 
                name: 'Admin User', 
                email: 'admin@company.com', 
                password: 'admin123', 
                role: 'admin',
                phone: '+1 (555) 123-4567',
                address: '123 Business Ave, Suite 100, New York, NY 10001',
                profilePicture: 'https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=150&h=150&fit=crop&crop=face'
            }
        ];
        
        const defaultProjects = [];
        const defaultTasks = [];
        
        // Load data from localStorage or use defaults
        let users = JSON.parse(localStorage.getItem('FiloTrack_users')) || defaultUsers;
        let projects = JSON.parse(localStorage.getItem('FiloTrack_projects')) || defaultProjects;
        let tasks = JSON.parse(localStorage.getItem('FiloTrack_tasks')) || defaultTasks;
        let projectAssignments = JSON.parse(localStorage.getItem('FiloTrack_projectAssignments')) || [];

        // GitHub Sync Functions
        async function initializeGitHubSync() {
            updateSyncStatus('online');
            startSyncInterval();
            
            // Initial sync on startup
            await syncWithGitHub();
        }



        async function validateGitHubConfig(config) {
            try {
                const response = await fetch(`https://api.github.com/repos/${config.username}/${config.repo}`, {
                    headers: {
                        'Authorization': `token ${config.token}`,
                        'Accept': 'application/vnd.github.v3+json'
                    }
                });
                
                if (response.status === 404) {
                    // Repository doesn't exist, try to create it
                    return await createGitHubRepository(config);
                }
                
                return response.ok;
            } catch (error) {
                console.error('GitHub validation error:', error);
                return false;
            }
        }

        async function createGitHubRepository(config) {
            try {
                const response = await fetch('https://api.github.com/user/repos', {
                    method: 'POST',
                    headers: {
                        'Authorization': `token ${config.token}`,
                        'Accept': 'application/vnd.github.v3+json',
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        name: config.repo,
                        description: 'FiloTrack Project Management Data',
                        private: true,
                        auto_init: true
                    })
                });
                
                if (response.ok) {
                    addNotification('GitHub repository created successfully!', 'success');
                    return true;
                }
                
                throw new Error('Failed to create repository');
            } catch (error) {
                console.error('Repository creation error:', error);
                return false;
            }
        }

        async function syncWithGitHub() {
            if (!githubConfig || !isOnline) {
                updateSyncStatus('offline');
                return;
            }
            
            updateSyncStatus('syncing');
            
            try {
                // Get current data from GitHub
                const remoteData = await fetchDataFromGitHub();
                
                // Merge local and remote data
                const mergedData = mergeData(getLocalData(), remoteData);
                
                // Update local storage
                updateLocalData(mergedData);
                
                // Push merged data back to GitHub
                await pushDataToGitHub(mergedData);
                
                lastSyncTime = new Date().toISOString();
                localStorage.setItem('FiloTrack_lastSyncTime', lastSyncTime);
                
                updateSyncStatus('online');
                
                // Refresh current view if needed
                refreshCurrentView();
                
            } catch (error) {
                console.error('Sync error:', error);
                updateSyncStatus('error');
                
                // Fallback to local storage
                addNotification('Sync failed, working offline', 'warning');
            }
        }

        async function fetchDataFromGitHub() {
            try {
                const response = await fetch(`https://api.github.com/repos/${githubConfig.username}/${githubConfig.repo}/contents/data.json`, {
                    headers: {
                        'Authorization': `token ${githubConfig.token}`,
                        'Accept': 'application/vnd.github.v3+json'
                    }
                });
                
                if (response.status === 404) {
                    // File doesn't exist yet, return empty data
                    return {
                        users: defaultUsers,
                        projects: [],
                        tasks: [],
                        projectAssignments: [],
                        notifications: [],
                        messages: [],
                        lastModified: new Date().toISOString()
                    };
                }
                
                if (!response.ok) {
                    throw new Error('Failed to fetch data from GitHub');
                }
                
                const fileData = await response.json();
                const content = atob(fileData.content);
                return JSON.parse(content);
                
            } catch (error) {
                console.error('Fetch from GitHub error:', error);
                throw error;
            }
        }

        async function pushDataToGitHub(data) {
            try {
                // First, get the current file to get its SHA
                let sha = null;
                try {
                    const currentFile = await fetch(`https://api.github.com/repos/${githubConfig.username}/${githubConfig.repo}/contents/data.json`, {
                        headers: {
                            'Authorization': `token ${githubConfig.token}`,
                            'Accept': 'application/vnd.github.v3+json'
                        }
                    });
                    
                    if (currentFile.ok) {
                        const fileData = await currentFile.json();
                        sha = fileData.sha;
                    }
                } catch (e) {
                    // File doesn't exist, that's okay
                }
                
                const content = btoa(JSON.stringify(data, null, 2));
                
                const response = await fetch(`https://api.github.com/repos/${githubConfig.username}/${githubConfig.repo}/contents/data.json`, {
                    method: 'PUT',
                    headers: {
                        'Authorization': `token ${githubConfig.token}`,
                        'Accept': 'application/vnd.github.v3+json',
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        message: `Update FiloTrack data - ${new Date().toISOString()}`,
                        content: content,
                        sha: sha
                    })
                });
                
                if (!response.ok) {
                    throw new Error('Failed to push data to GitHub');
                }
                
            } catch (error) {
                console.error('Push to GitHub error:', error);
                throw error;
            }
        }

        function getLocalData() {
            return {
                users,
                projects,
                tasks,
                projectAssignments,
                notifications,
                messages,
                lastModified: new Date().toISOString()
            };
        }

        function updateLocalData(data) {
            users = data.users || defaultUsers;
            projects = data.projects || [];
            tasks = data.tasks || [];
            projectAssignments = data.projectAssignments || [];
            notifications = data.notifications || [];
            messages = data.messages || [];
            
            saveData();
        }

        function mergeData(localData, remoteData) {
            // Simple merge strategy: use the most recent data based on timestamps
            const localTime = new Date(localData.lastModified || 0);
            const remoteTime = new Date(remoteData.lastModified || 0);
            
            if (localTime > remoteTime) {
                return localData;
            } else {
                return remoteData;
            }
        }

        function updateSyncStatus(status) {
            syncStatus = status;
            const indicator = document.getElementById('syncIndicator');
            const statusText = document.getElementById('syncStatus');
            const githubStatusDot = document.getElementById('githubSyncStatus');
            
            indicator.className = 'sync-indicator';
            
            switch (status) {
                case 'online':
                    indicator.classList.add('sync-online');
                    statusText.textContent = 'Synced';
                    githubStatusDot.className = 'absolute -top-1 -right-1 w-3 h-3 bg-green-500 rounded-full';
                    break;
                case 'offline':
                    indicator.classList.add('sync-offline');
                    statusText.textContent = 'Offline';
                    githubStatusDot.className = 'absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full';
                    break;
                case 'syncing':
                    indicator.classList.add('sync-syncing');
                    statusText.textContent = 'Syncing...';
                    githubStatusDot.className = 'absolute -top-1 -right-1 w-3 h-3 bg-yellow-500 rounded-full';
                    break;
                case 'error':
                    indicator.classList.add('sync-error');
                    statusText.textContent = 'Sync Error';
                    githubStatusDot.className = 'absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full';
                    break;
            }
        }

        function startSyncInterval() {
            if (syncInterval) {
                clearInterval(syncInterval);
            }
            
            // Sync every 30 seconds
            syncInterval = setInterval(async () => {
                if (isOnline && githubConfig) {
                    await syncWithGitHub();
                }
            }, 30000);
        }

        function refreshCurrentView() {
            // Refresh the current view to show updated data
            const currentView = document.querySelector('[id$="View"]:not(.hidden)');
            if (currentView) {
                const viewName = currentView.id.replace('View', '');
                showView(viewName);
            }
        }

        // Save data to localStorage and sync with GitHub
        function saveData() {
            localStorage.setItem('FiloTrack_users', JSON.stringify(users));
            localStorage.setItem('FiloTrack_projects', JSON.stringify(projects));
            localStorage.setItem('FiloTrack_tasks', JSON.stringify(tasks));
            localStorage.setItem('FiloTrack_projectAssignments', JSON.stringify(projectAssignments));
            localStorage.setItem('FiloTrack_notifications', JSON.stringify(notifications));
            localStorage.setItem('FiloTrack_darkMode', JSON.stringify(isDarkMode));
            localStorage.setItem('FiloTrack_messages', JSON.stringify(messages));
            
            // Trigger sync with GitHub if connected
            if (githubConfig && isOnline) {
                // Debounce sync calls to avoid too frequent syncing
                clearTimeout(window.syncTimeout);
                window.syncTimeout = setTimeout(() => {
                    syncWithGitHub();
                }, 2000);
            }
        }

        // Network status monitoring
        window.addEventListener('online', () => {
            isOnline = true;
            if (githubConfig) {
                updateSyncStatus('online');
                syncWithGitHub();
                startSyncInterval();
            }
        });

        window.addEventListener('offline', () => {
            isOnline = false;
            updateSyncStatus('offline');
            if (syncInterval) {
                clearInterval(syncInterval);
            }
        });

        // Initialize the application
        function init() {
            // Apply dark mode if enabled
            if (isDarkMode) {
                document.body.classList.add('dark-mode');
            }
            
            // Set up event listeners
            setupEventListeners();
            
            // Initialize GitHub sync
            initializeGitHubSync();
            
            // Show login screen
            showLoginScreen();
            
            // Display random quote
            displayRandomQuote();
        }

        // Setup all event listeners
        function setupEventListeners() {
            
            // Login form
            document.getElementById('loginForm').addEventListener('submit', handleLogin);
            
            // Navigation
            document.getElementById('sidebarToggle').addEventListener('click', toggleSidebar);
            document.getElementById('dashboardBtn').addEventListener('click', () => showView('dashboard'));
            document.getElementById('projectsBtn').addEventListener('click', () => showView('projects'));
            document.getElementById('tasksBtn').addEventListener('click', () => showView('tasks'));
            document.getElementById('teamBtn').addEventListener('click', () => showView('team'));
            document.getElementById('chatBtn').addEventListener('click', () => showView('chat'));
            document.getElementById('reportsBtn').addEventListener('click', () => showView('reports'));
            
            // User menu
            document.getElementById('userMenuBtn').addEventListener('click', toggleUserMenu);
            document.getElementById('profileBtn').addEventListener('click', showProfile);
            document.getElementById('logoutBtn').addEventListener('click', logout);
            
            // Dark mode toggle
            document.getElementById('darkModeToggle').addEventListener('click', toggleDarkMode);
            
            // Notifications
            document.getElementById('notificationBtn').addEventListener('click', toggleNotifications);
            
            // Modals
            document.getElementById('addProjectBtn').addEventListener('click', showAddProjectModal);
            document.getElementById('addTaskBtn').addEventListener('click', showAddTaskModal);
            document.getElementById('addUserBtn').addEventListener('click', showAddUserModal);
            
            // Modal forms
            document.getElementById('addProjectForm').addEventListener('submit', handleAddProject);
            document.getElementById('addTaskForm').addEventListener('submit', handleAddTask);
            document.getElementById('addUserForm').addEventListener('submit', handleAddUser);
            
            // Modal close buttons
            document.getElementById('cancelProjectBtn').addEventListener('click', hideAddProjectModal);
            document.getElementById('cancelTaskBtn').addEventListener('click', hideAddTaskModal);
            document.getElementById('cancelUserBtn').addEventListener('click', hideAddUserModal);
            
            // Task filters
            document.querySelectorAll('.task-filter').forEach(btn => {
                btn.addEventListener('click', (e) => filterTasks(e.target.dataset.status));
            });
            
            // Quote button
            document.getElementById('newQuoteBtn').addEventListener('click', displayRandomQuote);
            
            // Chat functionality
            document.getElementById('sendMessageBtn').addEventListener('click', sendMessage);
            document.getElementById('chatInput').addEventListener('keypress', (e) => {
                if (e.key === 'Enter') sendMessage();
            });
            
            // Close modals when clicking outside
            window.addEventListener('click', (e) => {
                if (e.target.classList.contains('fixed')) {
                    hideAllModals();
                }
            });
        }

        // Authentication
        function handleLogin(e) {
            e.preventDefault();
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            
            const user = users.find(u => u.email === email && u.password === password);
            
            if (user) {
                currentUser = user;
                showMainApp();
                addNotification(`Welcome back, ${user.name}!`, 'success');
            } else {
                alert('Invalid credentials. Please try again.');
            }
        }

        function logout() {
            currentUser = null;
            showLoginScreen();
            hideUserMenu();
        }

        function showLoginScreen() {
            document.getElementById('loginScreen').classList.remove('hidden');
            document.getElementById('mainApp').classList.add('hidden');
        }

        function showMainApp() {
            document.getElementById('loginScreen').classList.add('hidden');
            document.getElementById('mainApp').classList.remove('hidden');
            
            // Update user info in header
            document.getElementById('userName').textContent = currentUser.name;
            document.getElementById('userAvatar').src = currentUser.profilePicture;
            
            // Show/hide team button based on user role
            const teamBtn = document.getElementById('teamBtn');
            if (currentUser.role === 'admin' || currentUser.role === 'manager') {
                teamBtn.style.display = 'block';
            } else {
                teamBtn.style.display = 'none';
            }
            
            // Show dashboard by default
            showView('dashboard');
            updateDashboardStats();
            loadRecentProjects();
            updateNotificationBadge();
        }

        // Navigation
        function showView(viewName) {
            // Hide all views
            document.querySelectorAll('[id$="View"]').forEach(view => {
                view.classList.add('hidden');
            });
            
            // Show selected view
            document.getElementById(viewName + 'View').classList.remove('hidden');
            
            // Update sidebar active state
            document.querySelectorAll('#sidebar button').forEach(btn => {
                btn.classList.remove('bg-gray-700');
            });
            document.getElementById(viewName + 'Btn').classList.add('bg-gray-700');
            
            // Load view-specific data
            switch(viewName) {
                case 'dashboard':
                    updateDashboardStats();
                    loadRecentProjects();
                    break;
                case 'projects':
                    loadProjects();
                    break;
                case 'tasks':
                    loadTasks();
                    break;
                case 'team':
                    if (currentUser.role === 'admin' || currentUser.role === 'manager') {
                        loadTeamMembers();
                    } else {
                        alert('Access denied. Only administrators and managers can view team members.');
                        showView('dashboard');
                    }
                    break;
                case 'chat':
                    loadChatUsers();
                    break;
                case 'reports':
                    loadReports();
                    break;
            }
        }

        function showTasksWithFilter(status) {
            showView('tasks');
            filterTasks(status);
        }

        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            sidebarCollapsed = !sidebarCollapsed;
            
            if (sidebarCollapsed) {
                sidebar.classList.add('-translate-x-full');
            } else {
                sidebar.classList.remove('-translate-x-full');
            }
        }

        // User menu
        function toggleUserMenu() {
            const dropdown = document.getElementById('userDropdown');
            dropdown.classList.toggle('hidden');
        }

        function hideUserMenu() {
            document.getElementById('userDropdown').classList.add('hidden');
        }

        function showProfile() {
            // Implementation for profile modal would go here
            hideUserMenu();
        }

        // Dark mode
        function toggleDarkMode() {
            isDarkMode = !isDarkMode;
            document.body.classList.toggle('dark-mode');
            saveData();
        }

        // Notifications
        function toggleNotifications() {
            const dropdown = document.getElementById('notificationDropdown');
            dropdown.classList.toggle('hidden');
            loadNotifications();
        }

        function addNotification(message, type = 'info') {
            const notification = {
                id: Date.now(),
                message,
                type,
                timestamp: new Date().toISOString(),
                read: false
            };
            
            notifications.unshift(notification);
            updateNotificationBadge();
            saveData();
        }

        function updateNotificationBadge() {
            const badge = document.getElementById('notificationBadge');
            const unreadCount = notifications.filter(n => !n.read).length;
            
            if (unreadCount > 0) {
                badge.textContent = unreadCount;
                badge.classList.remove('hidden');
            } else {
                badge.classList.add('hidden');
            }
        }

        function loadNotifications() {
            const list = document.getElementById('notificationList');
            
            if (notifications.length === 0) {
                list.innerHTML = '<p class="p-4 text-gray-500 text-center">No notifications</p>';
                return;
            }
            
            list.innerHTML = notifications.map(notification => `
                <div class="p-3 border-b border-gray-200 ${notification.read ? 'bg-gray-50' : 'bg-blue-50'}">
                    <p class="text-sm text-gray-800">${notification.message}</p>
                    <p class="text-xs text-gray-500 mt-1">${formatDate(notification.timestamp)}</p>
                </div>
            `).join('');
            
            // Mark all as read
            notifications.forEach(n => n.read = true);
            updateNotificationBadge();
            saveData();
        }

        // Dashboard
        function updateDashboardStats() {
            document.getElementById('totalProjects').textContent = projects.length;
            document.getElementById('activeTasks').textContent = tasks.filter(t => t.status === 'active' || t.status === 'to-do' || t.status === 'under-review').length;
            document.getElementById('pendingTasks').textContent = tasks.filter(t => t.status === 'pending').length;
            document.getElementById('teamMembers').textContent = users.length;
            
            // Update welcome message based on time
            const hour = new Date().getHours();
            let greeting = 'Good morning';
            if (hour >= 12 && hour < 17) greeting = 'Good afternoon';
            else if (hour >= 17) greeting = 'Good evening';
            
            document.getElementById('welcomeMessage').textContent = 
                `${greeting}, ${currentUser.name}! Here's what's happening with your projects today.`;
        }

        function loadRecentProjects() {
            const container = document.getElementById('recentProjects');
            
            if (projects.length === 0) {
                container.innerHTML = '<p class="text-gray-500 text-center py-8">No projects yet. Create your first project!</p>';
                return;
            }
            
            const recentProjects = projects.slice(0, 3);
            container.innerHTML = recentProjects.map(project => `
                <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                    <div>
                        <h4 class="font-medium text-gray-800">${project.name}</h4>
                        <p class="text-sm text-gray-600">${project.status}</p>
                    </div>
                    <span class="px-2 py-1 text-xs rounded-full ${getPriorityColor(project.priority)}">${project.priority}</span>
                </div>
            `).join('');
        }

        // Projects
        function loadProjects() {
            const container = document.getElementById('projectsList');
            
            if (projects.length === 0) {
                container.innerHTML = '<div class="col-span-full text-center py-12"><p class="text-gray-500">No projects yet. Create your first project!</p></div>';
                return;
            }
            
            container.innerHTML = projects.map(project => `
                <div class="bg-white p-6 rounded-lg shadow-md card-hover">
                    <div class="flex justify-between items-start mb-4">
                        <h3 class="text-lg font-semibold text-gray-800">${project.name}</h3>
                        <span class="px-2 py-1 text-xs rounded-full ${getPriorityColor(project.priority)}">${project.priority}</span>
                    </div>
                    <p class="text-gray-600 mb-4">${project.description}</p>
                    
                    <div class="flex justify-between items-center text-sm text-gray-500 mb-4">
                        <span>Due: ${formatDate(project.dueDate)}</span>
                        <span class="px-2 py-1 rounded-full ${getStatusColor(project.status)}">${project.status}</span>
                    </div>
                    
                    <div class="flex flex-wrap gap-2">
                        <button onclick="editProject(${project.id})" class="text-blue-600 hover:text-blue-800 px-2 py-1">Edit</button>
                        <button onclick="deleteProject(${project.id})" class="text-red-600 hover:text-red-800 px-2 py-1">Delete</button>
                    </div>
                </div>
            `).join('');
        }

        function showAddProjectModal() {
            document.getElementById('addProjectModal').classList.remove('hidden');
        }

        function hideAddProjectModal() {
            document.getElementById('addProjectModal').classList.add('hidden');
            document.getElementById('addProjectForm').reset();
        }

        function handleAddProject(e) {
            e.preventDefault();
            
            const projectData = {
                id: Date.now(),
                name: document.getElementById('projectName').value,
                description: document.getElementById('projectDescription').value,
                dueDate: document.getElementById('projectDueDate').value,
                priority: document.getElementById('projectPriority').value,
                status: 'active',
                createdBy: currentUser.id,
                createdAt: new Date().toISOString()
            };
            
            projects.push(projectData);
            saveData();
            hideAddProjectModal();
            loadProjects();
            updateDashboardStats();
            
            addNotification(`Project "${projectData.name}" created successfully!`, 'success');
        }

        function editProject(id) {
            const project = projects.find(p => p.id === id);
            if (!project) return;
            
            // Populate form with project data
            document.getElementById('projectName').value = project.name;
            document.getElementById('projectDescription').value = project.description;
            document.getElementById('projectDueDate').value = project.dueDate;
            document.getElementById('projectPriority').value = project.priority;
            
            // Show modal
            document.getElementById('addProjectModal').classList.remove('hidden');
            
            // Update form handler to edit instead of create
            const form = document.getElementById('addProjectForm');
            form.onsubmit = function(e) {
                e.preventDefault();
                
                project.name = document.getElementById('projectName').value;
                project.description = document.getElementById('projectDescription').value;
                project.dueDate = document.getElementById('projectDueDate').value;
                project.priority = document.getElementById('projectPriority').value;
                project.updatedAt = new Date().toISOString();
                
                saveData();
                hideAddProjectModal();
                loadProjects();
                updateDashboardStats();
                
                addNotification(`Project "${project.name}" updated successfully!`, 'success');
                
                // Reset form handler
                form.onsubmit = handleAddProject;
            };
        }

        function deleteProject(id) {
            if (confirm('Are you sure you want to delete this project?')) {
                projects = projects.filter(p => p.id !== id);
                tasks = tasks.filter(t => t.projectId !== id);
                projectAssignments = projectAssignments.filter(pa => pa.projectId !== id);
                saveData();
                loadProjects();
                updateDashboardStats();
                addNotification('Project deleted successfully!', 'success');
            }
        }

        // Tasks
        function loadTasks() {
            const container = document.getElementById('tasksList');
            
            if (tasks.length === 0) {
                container.innerHTML = '<div class="text-center py-12"><p class="text-gray-500">No tasks yet. Create your first task!</p></div>';
                return;
            }
            
            container.innerHTML = tasks.map(task => {
                const project = projects.find(p => p.id === task.projectId);
                const assignee = users.find(u => u.id === task.assigneeId);
                
                return `
                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <div class="flex justify-between items-start mb-4">
                            <h3 class="text-lg font-semibold text-gray-800">${task.title}</h3>
                            <div class="flex space-x-2">
                                <span class="px-2 py-1 text-xs rounded-full ${getPriorityColor(task.priority)}">${task.priority}</span>
                                <span class="px-2 py-1 text-xs rounded-full ${getStatusColor(task.status)}">${task.status}</span>
                            </div>
                        </div>
                        <p class="text-gray-600 mb-4">${task.description}</p>
                        
                        <div class="flex justify-between items-center text-sm text-gray-500 mb-4">
                            <span>Project: ${project ? project.name : 'No Project'}</span>
                            <span>Assigned to: ${assignee ? assignee.name : 'Unassigned'}</span>
                        </div>
                        
                        <div class="flex justify-between items-center text-sm text-gray-500 mb-4">
                            <span>Due: ${formatDate(task.dueDate)}</span>
                        </div>
                        
                        <div class="flex flex-wrap gap-2">
                            <button onclick="editTask(${task.id})" class="text-blue-600 hover:text-blue-800 px-2 py-1">Edit</button>
                            <button onclick="deleteTask(${task.id})" class="text-red-600 hover:text-red-800 px-2 py-1">Delete</button>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function showAddTaskModal() {
            // Populate project dropdown
            const projectSelect = document.getElementById('taskProject');
            projectSelect.innerHTML = '<option value="">Select Project</option>' + 
                projects.map(p => `<option value="${p.id}">${p.name}</option>`).join('');
            
            // Populate assignee dropdown
            const assigneeSelect = document.getElementById('taskAssignee');
            assigneeSelect.innerHTML = '<option value="">Select Assignee</option>' + 
                users.map(u => `<option value="${u.id}">${u.name}</option>`).join('');
            
            document.getElementById('addTaskModal').classList.remove('hidden');
        }

        function hideAddTaskModal() {
            document.getElementById('addTaskModal').classList.add('hidden');
            document.getElementById('addTaskForm').reset();
        }

        function handleAddTask(e) {
            e.preventDefault();
            
            const taskData = {
                id: Date.now(),
                title: document.getElementById('taskTitle').value,
                description: document.getElementById('taskDescription').value,
                projectId: parseInt(document.getElementById('taskProject').value) || null,
                assigneeId: parseInt(document.getElementById('taskAssignee').value) || null,
                dueDate: document.getElementById('taskDueDate').value,
                priority: document.getElementById('taskPriority').value,
                status: 'to-do',
                createdBy: currentUser.id,
                createdAt: new Date().toISOString()
            };
            
            tasks.push(taskData);
            saveData();
            hideAddTaskModal();
            loadTasks();
            updateDashboardStats();
            
            addNotification(`Task "${taskData.title}" created successfully!`, 'success');
        }

        function editTask(id) {
            const task = tasks.find(t => t.id === id);
            if (!task) return;
            
            // Populate dropdowns first
            showAddTaskModal();
            
            // Then populate form with task data
            document.getElementById('taskTitle').value = task.title;
            document.getElementById('taskDescription').value = task.description;
            document.getElementById('taskProject').value = task.projectId || '';
            document.getElementById('taskAssignee').value = task.assigneeId || '';
            document.getElementById('taskDueDate').value = task.dueDate;
            document.getElementById('taskPriority').value = task.priority;
            
            // Update form handler to edit instead of create
            const form = document.getElementById('addTaskForm');
            form.onsubmit = function(e) {
                e.preventDefault();
                
                task.title = document.getElementById('taskTitle').value;
                task.description = document.getElementById('taskDescription').value;
                task.projectId = parseInt(document.getElementById('taskProject').value) || null;
                task.assigneeId = parseInt(document.getElementById('taskAssignee').value) || null;
                task.dueDate = document.getElementById('taskDueDate').value;
                task.priority = document.getElementById('taskPriority').value;
                task.updatedAt = new Date().toISOString();
                
                saveData();
                hideAddTaskModal();
                loadTasks();
                updateDashboardStats();
                
                addNotification(`Task "${task.title}" updated successfully!`, 'success');
                
                // Reset form handler
                form.onsubmit = handleAddTask;
            };
        }

        function deleteTask(id) {
            if (confirm('Are you sure you want to delete this task?')) {
                tasks = tasks.filter(t => t.id !== id);
                saveData();
                loadTasks();
                updateDashboardStats();
                addNotification('Task deleted successfully!', 'success');
            }
        }

        function filterTasks(status) {
            // Update filter buttons
            document.querySelectorAll('.task-filter').forEach(btn => {
                btn.classList.remove('active', 'bg-blue-600', 'text-white');
                btn.classList.add('bg-gray-200', 'text-gray-700');
            });
            
            const activeBtn = document.querySelector(`[data-status="${status}"]`);
            activeBtn.classList.remove('bg-gray-200', 'text-gray-700');
            activeBtn.classList.add('active', 'bg-blue-600', 'text-white');
            
            // Filter tasks
            const filteredTasks = status === 'all' ? tasks : tasks.filter(t => t.status === status);
            
            const container = document.getElementById('tasksList');
            
            if (filteredTasks.length === 0) {
                container.innerHTML = '<div class="text-center py-12"><p class="text-gray-500">No tasks found for this filter.</p></div>';
                return;
            }
            
            container.innerHTML = filteredTasks.map(task => {
                const project = projects.find(p => p.id === task.projectId);
                const assignee = users.find(u => u.id === task.assigneeId);
                
                return `
                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <div class="flex justify-between items-start mb-4">
                            <h3 class="text-lg font-semibold text-gray-800">${task.title}</h3>
                            <div class="flex space-x-2">
                                <span class="px-2 py-1 text-xs rounded-full ${getPriorityColor(task.priority)}">${task.priority}</span>
                                <span class="px-2 py-1 text-xs rounded-full ${getStatusColor(task.status)}">${task.status}</span>
                            </div>
                        </div>
                        <p class="text-gray-600 mb-4">${task.description}</p>
                        
                        <div class="flex justify-between items-center text-sm text-gray-500 mb-4">
                            <span>Project: ${project ? project.name : 'No Project'}</span>
                            <span>Assigned to: ${assignee ? assignee.name : 'Unassigned'}</span>
                        </div>
                        
                        <div class="flex justify-between items-center text-sm text-gray-500 mb-4">
                            <span>Due: ${formatDate(task.dueDate)}</span>
                        </div>
                        
                        <div class="flex flex-wrap gap-2">
                            <button onclick="editTask(${task.id})" class="text-blue-600 hover:text-blue-800 px-2 py-1">Edit</button>
                            <button onclick="deleteTask(${task.id})" class="text-red-600 hover:text-red-800 px-2 py-1">Delete</button>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // Team Management
        function loadTeamMembers() {
            const container = document.getElementById('teamList');
            
            container.innerHTML = users.map(user => `
                <div class="bg-white p-6 rounded-lg shadow-md card-hover">
                    <div class="text-center mb-4">
                        <img src="${user.profilePicture}" alt="${user.name}" class="w-20 h-20 rounded-full mx-auto mb-4">
                        <h3 class="text-lg font-semibold text-gray-800">${user.name}</h3>
                        <p class="text-gray-600 capitalize">${user.role}</p>
                    </div>
                    
                    <div class="space-y-2 text-sm text-gray-600">
                        <p><strong>Email:</strong> ${user.email}</p>
                        <p><strong>Phone:</strong> ${user.phone || 'Not provided'}</p>
                        <p><strong>Address:</strong> ${user.address || 'Not provided'}</p>
                    </div>
                    
                    <div class="mt-4 flex justify-center space-x-2">
                        <button onclick="editUser(${user.id})" class="text-blue-600 hover:text-blue-800 px-2 py-1">Edit</button>
                        ${user.id !== currentUser.id ? `<button onclick="deleteUser(${user.id})" class="text-red-600 hover:text-red-800 px-2 py-1">Delete</button>` : ''}
                    </div>
                </div>
            `).join('');
        }

        function showAddUserModal() {
            document.getElementById('addUserModal').classList.remove('hidden');
        }

        function hideAddUserModal() {
            document.getElementById('addUserModal').classList.add('hidden');
            document.getElementById('addUserForm').reset();
        }

        function handleAddUser(e) {
            e.preventDefault();
            
            const userData = {
                id: Date.now(),
                name: document.getElementById('userFullName').value,
                email: document.getElementById('userEmail').value,
                password: document.getElementById('userPassword').value,
                role: document.getElementById('userRole').value,
                phone: document.getElementById('userPhone').value,
                profilePicture: 'https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=150&h=150&fit=crop&crop=face',
                createdAt: new Date().toISOString()
            };
            
            users.push(userData);
            saveData();
            hideAddUserModal();
            loadTeamMembers();
            updateDashboardStats();
            
            addNotification(`Team member "${userData.name}" added successfully!`, 'success');
        }

        function editUser(id) {
            const user = users.find(u => u.id === id);
            if (!user) return;
            
            // Populate form with user data
            document.getElementById('userFullName').value = user.name;
            document.getElementById('userEmail').value = user.email;
            document.getElementById('userPassword').value = user.password;
            document.getElementById('userRole').value = user.role;
            document.getElementById('userPhone').value = user.phone || '';
            
            // Show modal
            document.getElementById('addUserModal').classList.remove('hidden');
            
            // Update form handler to edit instead of create
            const form = document.getElementById('addUserForm');
            form.onsubmit = function(e) {
                e.preventDefault();
                
                user.name = document.getElementById('userFullName').value;
                user.email = document.getElementById('userEmail').value;
                user.password = document.getElementById('userPassword').value;
                user.role = document.getElementById('userRole').value;
                user.phone = document.getElementById('userPhone').value;
                user.updatedAt = new Date().toISOString();
                
                saveData();
                hideAddUserModal();
                loadTeamMembers();
                updateDashboardStats();
                
                addNotification(`Team member "${user.name}" updated successfully!`, 'success');
                
                // Reset form handler
                form.onsubmit = handleAddUser;
            };
        }

        function deleteUser(id) {
            if (confirm('Are you sure you want to delete this team member?')) {
                users = users.filter(u => u.id !== id);
                tasks = tasks.filter(t => t.assigneeId !== id);
                projectAssignments = projectAssignments.filter(pa => pa.userId !== id);
                saveData();
                loadTeamMembers();
                updateDashboardStats();
                addNotification('Team member deleted successfully!', 'success');
            }
        }

        // Chat functionality
        function loadChatUsers() {
            const container = document.getElementById('chatUsersList');
            const otherUsers = users.filter(u => u.id !== currentUser.id);
            
            if (otherUsers.length === 0) {
                container.innerHTML = '<p class="p-4 text-gray-500 text-center">No team members to chat with</p>';
                return;
            }
            
            container.innerHTML = otherUsers.map(user => `
                <div class="p-3 hover:bg-gray-50 cursor-pointer border-b border-gray-200" onclick="selectChatUser(${user.id})">
                    <div class="flex items-center space-x-3">
                        <img src="${user.profilePicture}" alt="${user.name}" class="w-10 h-10 rounded-full">
                        <div>
                            <div class="font-medium text-gray-800">${user.name}</div>
                            <div class="text-sm text-gray-600 capitalize">${user.role}</div>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function selectChatUser(userId) {
            selectedChatUser = users.find(u => u.id === userId);
            if (!selectedChatUser) return;
            
            document.getElementById('chatHeader').textContent = `Chat with ${selectedChatUser.name}`;
            document.getElementById('chatInputArea').classList.remove('hidden');
            
            loadChatMessages();
        }

        function loadChatMessages() {
            const container = document.getElementById('chatMessages');
            const chatMessages = messages.filter(m => 
                (m.senderId === currentUser.id && m.receiverId === selectedChatUser.id) ||
                (m.senderId === selectedChatUser.id && m.receiverId === currentUser.id)
            );
            
            if (chatMessages.length === 0) {
                container.innerHTML = `
                    <div class="text-center text-gray-500 mt-20">
                        <p>No messages yet. Start the conversation!</p>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = chatMessages.map(message => {
                const isOwnMessage = message.senderId === currentUser.id;
                return `
                    <div class="mb-4 ${isOwnMessage ? 'text-right' : 'text-left'}">
                        <div class="message-bubble inline-block p-3 rounded-lg ${isOwnMessage ? 'bg-blue-600 text-white' : 'bg-gray-200 text-gray-800'}">
                            <p>${message.content}</p>
                            <p class="text-xs mt-1 opacity-75">${formatTime(message.timestamp)}</p>
                        </div>
                    </div>
                `;
            }).join('');
            
            // Scroll to bottom
            container.scrollTop = container.scrollHeight;
        }

        function sendMessage() {
            const input = document.getElementById('chatInput');
            const content = input.value.trim();
            
            if (!content || !selectedChatUser) return;
            
            const message = {
                id: Date.now(),
                senderId: currentUser.id,
                receiverId: selectedChatUser.id,
                content: content,
                timestamp: new Date().toISOString()
            };
            
            messages.push(message);
            saveData();
            
            input.value = '';
            loadChatMessages();
        }

        // Reports
        function loadReports() {
            // Project status counts
            const activeProjects = projects.filter(p => p.status === 'active').length;
            const completedProjects = projects.filter(p => p.status === 'completed').length;
            const onHoldProjects = projects.filter(p => p.status === 'on-hold').length;
            
            document.getElementById('activeProjectsCount').textContent = activeProjects;
            document.getElementById('completedProjectsCount').textContent = completedProjects;
            document.getElementById('onHoldProjectsCount').textContent = onHoldProjects;
            
            // Task completion stats
            const completedTasks = tasks.filter(t => t.status === 'completed').length;
            const totalTasks = tasks.length;
            const completionRate = totalTasks > 0 ? Math.round((completedTasks / totalTasks) * 100) : 0;
            
            document.getElementById('completedTasksCount').textContent = completedTasks;
            document.getElementById('totalTasksCount').textContent = totalTasks;
            document.getElementById('completionRate').textContent = completionRate + '%';
        }

        // Utility functions
        function formatDate(dateString) {
            if (!dateString) return 'No date';
            const date = new Date(dateString);
            return date.toLocaleDateString();
        }

        function formatTime(dateString) {
            const date = new Date(dateString);
            return date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
        }

        function getPriorityColor(priority) {
            switch (priority) {
                case 'high': return 'bg-red-100 text-red-800';
                case 'medium': return 'bg-yellow-100 text-yellow-800';
                case 'low': return 'bg-green-100 text-green-800';
                default: return 'bg-gray-100 text-gray-800';
            }
        }

        function getStatusColor(status) {
            switch (status) {
                case 'active': return 'bg-blue-100 text-blue-800';
                case 'completed': return 'bg-green-100 text-green-800';
                case 'on-hold': return 'bg-yellow-100 text-yellow-800';
                case 'pending': return 'bg-orange-100 text-orange-800';
                case 'to-do': return 'bg-gray-100 text-gray-800';
                case 'under-review': return 'bg-purple-100 text-purple-800';
                default: return 'bg-gray-100 text-gray-800';
            }
        }

        function displayRandomQuote() {
            const randomQuote = quotes[Math.floor(Math.random() * quotes.length)];
            document.getElementById('dailyQuote').textContent = randomQuote.text;
            document.getElementById('quoteAuthor').textContent = `- ${randomQuote.author}`;
        }

        function hideAllModals() {
            document.querySelectorAll('.fixed').forEach(modal => {
                if (modal.id !== 'githubSetupModal' && modal.id !== 'loginScreen') {
                    modal.classList.add('hidden');
                }
            });
        }

        // Initialize the application
        init();
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9764bd9ed2929bc1',t:'MTc1NjM5Mzg4Mi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
